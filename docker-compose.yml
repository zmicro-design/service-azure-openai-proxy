services:
  azure-openai-proxy:
    restart: always
    image: whatwewant/azure-openai-proxy:${SERVICE_AZURE_OPENAI_PROXY_IMAGE_VERSION}
    ports:
      - 0.0.0.0:${SERVICE_AZURE_OPENAI_PROXY_PORT}:8080
    environment:
      PORT: $SERVICE_AZURE_OPENAI_PROXY_PORT
      BASE_PATH: ${SERVICE_AZURE_OPENAI_PROXY_BASE_PATH}
      AUTH_TOKEN: ${SERVICE_AZURE_OPENAI_PROXY_AUTH_TOKEN}
      API_KEY: ${SERVICE_AZURE_OPENAI_PROXY_API_KEY}
      API_VERSION: ${SERVICE_AZURE_OPENAI_PROXY_API_VERSION}
      CHAT_COMPLETION_RESOURCE: ${SERVICE_AZURE_OPENAI_PROXY_CHAT_COMPLETION_RESOURCE}
      CHAT_COMPLETION_DEPLOYMENT: ${SERVICE_AZURE_OPENAI_PROXY_CHAT_COMPLETION_DEPLOYMENT}
      EMBEDDING_RESOURCE: ${SERVICE_AZURE_OPENAI_PROXY_EMBEDDING_RESOURCE}
      EMBEDDING_DEPLOYMENT: ${SERVICE_AZURE_OPENAI_PROXY_EMBEDDING_DEPLOYMENT}
      
networks:
  default:
    external: true
    name: compose-ingress
